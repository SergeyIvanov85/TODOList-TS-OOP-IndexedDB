(()=>{"use strict";var t={192:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(537),o=n.n(r),s=n(645),a=n.n(s)()(o());a.push([t.id,'html{height:100%}body{min-height:100%;margin:0;background-color:bisque;display:flex;padding:20px;justify-content:center;align-items:start;font-family:sans-serif}.todo-view{padding:40px;background-color:#fff;box-shadow:0 10px 30px rgba(0,0,0,.5);display:flex;flex-direction:column;gap:40px;min-width:400px}form label{display:none}form input{border:thin solid #000;font-size:1em;flex:1 1 auto;max-width:unset;font-family:sans-serif}form button{background-color:gray;color:#fff;border:none;padding:0 10px;text-transform:uppercase}form div,form footer{display:flex;gap:10px;height:40px}form footer{margin-block-start:10px}.tasks{list-style-type:none;padding:0;margin:0}.tasks:empty{display:none}.tasks .group-header{color:gray;margin:10px 0}.tasks .group-items{list-style-type:none;padding:0;margin:0;display:flex;flex-direction:column;gap:10px}.tasks .task{display:flex;align-items:baseline;gap:10px}.tasks .task button{flex:0 0 20px;background-color:rgba(0,0,0,0);border:none;font-size:1.3em}.tasks .task .task-description{flex:1 1 auto}.tasks .task .task-delete::after{content:"ðŸ—‘"}.tasks .task .task-toggle::after{content:"âšª"}.tasks .task.completed .task-description{text-decoration:line-through}.tasks .task.completed .task-toggle::after{content:"âœ…"}',"",{version:3,sources:["webpack://./src/style.scss"],names:[],mappings:"AAAA,KAAA,WACE,CAAA,KAGF,eACE,CAAA,QACA,CAAA,uBACA,CAAA,YACA,CAAA,YACA,CAAA,sBACA,CAAA,iBACA,CAAA,sBACA,CAAA,WAGF,YACE,CAAA,qBACA,CAAA,qCACA,CAAA,YACA,CAAA,qBACA,CAAA,QACA,CAAA,eACA,CAAA,WAGA,YACE,CAAA,WAGF,sBACE,CAAA,aACA,CAAA,aACA,CAAA,eACA,CAAA,sBACA,CAAA,YAGF,qBACE,CAAA,UACA,CAAA,WACA,CAAA,cACA,CAAA,wBACA,CAAA,qBAGF,YACE,CAAA,QACA,CAAA,WACA,CAAA,YAGF,uBACE,CAAA,OAIJ,oBACE,CAAA,SACA,CAAA,QACA,CAAA,aAEA,YACE,CAAA,qBAGF,UACE,CAAA,aACA,CAAA,oBAGF,oBACE,CAAA,SACA,CAAA,QACA,CAAA,YACA,CAAA,qBACA,CAAA,QACA,CAAA,aAGF,YACE,CAAA,oBACA,CAAA,QACA,CAAA,oBAEA,aACE,CAAA,8BACA,CAAA,WACA,CAAA,eACA,CAAA,+BAGF,aACE,CAAA,iCAGF,YACE,CAAA,iCAGF,WACE,CAAA,yCAIA,4BACE,CAAA,2CAGF,WACE",sourcesContent:["html {\r\n  height: 100%;\r\n}\r\n\r\nbody {\r\n  min-height: 100%;\r\n  margin: 0;\r\n  background-color: bisque;\r\n  display: flex;\r\n  padding: 20px;\r\n  justify-content: center;\r\n  align-items: start;\r\n  font-family: sans-serif;\r\n}\r\n\r\n.todo-view {\r\n  padding: 40px;\r\n  background-color: white;\r\n  box-shadow: 0 10px 30px rgba(0,0,0,0.5);\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 40px;\r\n  min-width: 400px;\r\n}\r\nform {\r\n  label {\r\n    display: none;\r\n  }\r\n\r\n  input {\r\n    border: thin solid #000;\r\n    font-size: 1em;\r\n    flex: 1 1 auto;\r\n    max-width: unset;\r\n    font-family: sans-serif;\r\n  }\r\n\r\n  button {\r\n    background-color: gray;\r\n    color: white;\r\n    border: none;\r\n    padding: 0 10px;\r\n    text-transform: uppercase;\r\n  }\r\n\r\n  div, footer {\r\n    display: flex;\r\n    gap: 10px;\r\n    height: 40px;\r\n  }\r\n\r\n  footer {\r\n    margin-block-start: 10px;\r\n  }\r\n}\r\n\r\n.tasks {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  margin: 0;\r\n\r\n  &:empty {\r\n    display: none;\r\n  }\r\n\r\n  .group-header {\r\n    color: gray;\r\n    margin: 10px 0;\r\n  }\r\n\r\n  .group-items {\r\n    list-style-type: none;\r\n    padding: 0;\r\n    margin: 0;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 10px;\r\n  }\r\n\r\n  .task {\r\n    display: flex;\r\n    align-items: baseline;\r\n    gap: 10px;\r\n\r\n    button {\r\n      flex: 0 0 20px;\r\n      background-color: transparent;\r\n      border: none;\r\n      font-size: 1.3em;\r\n    }\r\n\r\n    .task-description {\r\n      flex: 1 1 auto;\r\n    }\r\n\r\n    .task-delete::after {\r\n      content: 'ðŸ—‘';\r\n    }\r\n\r\n    .task-toggle::after {\r\n      content: 'âšª';\r\n    }\r\n\r\n    &.completed {\r\n      .task-description {\r\n        text-decoration: line-through;\r\n      }\r\n\r\n      .task-toggle::after {\r\n        content: 'âœ…';\r\n      }\r\n    }\r\n  }\r\n}"],sourceRoot:""}]);const i=a},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var A=[].concat(t[l]);r&&a[A[0]]||(void 0!==s&&(void 0===A[5]||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=s),n&&(A[2]?(A[1]="@media ".concat(A[2]," {").concat(A[1],"}"),A[2]=n):A[2]=n),o&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=o):A[4]="".concat(o)),e.push(A))}},e}},537:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(o," */"),a=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([s]).join("\n")}return[e].join("\n")}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var s={},a=[],i=0;i<t.length;i++){var c=t[i],l=r.base?c[0]+r.base:c[0],A=s[l]||0,d="".concat(l," ").concat(A);s[l]=A+1;var u=n(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)e[u].references++,e[u].updater(f);else{var p=o(f,r);r.byIndex=i,e.splice(i,0,{identifier:d,updater:p,references:1})}a.push(d)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var s=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<s.length;a++){var i=n(s[a]);e[i].references--}for(var c=r(t,o),l=0;l<s.length;l++){var A=n(s[l]);0===e[A].references&&(e[A].updater(),e.splice(A,1))}s=c}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={id:r,exports:{}};return t[r](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{var t,e,r,o,s,a,i,c,l=n(379),A=n.n(l),d=n(795),u=n.n(d),f=n(569),p=n.n(f),h=n(565),m=n.n(h),C=n(216),g=n.n(C),v=n(589),y=n.n(v),b=n(192),k={};function x(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function w(t,e,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(t,n):o?o.value=n:e.set(t,n),n}k.styleTagTransform=y(),k.setAttributes=m(),k.insert=p().bind(null,"head"),k.domAPI=u(),k.insertStyleElement=g(),A()(b.Z,k),b.Z&&b.Z.locals&&b.Z.locals,Object.create,Object.create;class E{constructor(){var n,s;t.set(this,"MY_CUSTOM_TODO.DB"),e.set(this,"tasks"),r.set(this,[t=>{t.db.createObjectStore(x(this,e,"f"),{autoIncrement:!0,keyPath:"id"})}]),o.set(this,(n=x(this,t,"f"),s=x(this,r,"f"),new Promise(((t,e)=>{const r=indexedDB.open(n,s.length);r.onerror=()=>e(r.error),r.onsuccess=()=>t(r.result),r.onupgradeneeded=({oldVersion:t})=>{for(const e of s.slice(t))e(r.transaction)}}))))}getAllTasks(){return x(this,o,"f").then((t=>function(t,e,n){return new Promise(((n,r)=>{const o=[],s=t.transaction(e,"readonly").objectStore(e).openCursor(undefined);s.onerror=()=>r(s.error),s.onsuccess=()=>{const{result:t}=s;t?(o.push(t.value),t.continue()):n(o)}}))}(t,x(this,e,"f"))))}addTask(t){return x(this,o,"f").then((n=>function(t,e,n,r){return new Promise(((r,o)=>{const s=t.transaction(e,"readwrite").objectStore(e),a=s.add(n);a.onerror=()=>o(a.error),a.onsuccess=()=>r(a.result)}))}(n,x(this,e,"f"),t))).then((e=>Object.assign(Object.assign({},t),{id:e})))}removeTask(t){return x(this,o,"f").then((n=>function(t,e,n){return new Promise(((r,o)=>{const s=t.transaction(e,"readwrite").objectStore(e).delete(n);s.onerror=()=>o(s.error),s.onsuccess=()=>r()}))}(n,x(this,e,"f"),t)))}toggleTask(t){return x(this,o,"f").then((async n=>{const r=await function(t,e,n){return new Promise(((r,o)=>{const s=t.transaction(e,"readonly").objectStore(e).get(n);s.onerror=()=>o(s.error),s.onsuccess=()=>r(s.result)}))}(n,x(this,e,"f"),t),o=Object.assign(Object.assign({},r),{completed:!r.completed});return await function(t,e,n,r){return new Promise(((r,o)=>{const s=t.transaction(e,"readwrite").objectStore(e),a=s.put(n);a.onerror=()=>o(a.error),a.onsuccess=()=>r(a.result)}))}(n,x(this,e,"f"),o),o}))}closeDB(){x(this,o,"f").then((t=>t.close()))}}t=new WeakMap,e=new WeakMap,r=new WeakMap,o=new WeakMap;class T extends EventTarget{constructor(){super(),s.add(this),a.set(this,new E),i.set(this,[]),x(this,a,"f").getAllTasks().then((t=>{w(this,i,t,"f"),x(this,s,"m",c).call(this)}))}get tasks(){return x(this,i,"f")}add(t){x(this,a,"f").addTask(t).then((t=>{w(this,i,[...x(this,i,"f"),t],"f"),x(this,s,"m",c).call(this)}))}remove(t){x(this,a,"f").removeTask(t).then((()=>{w(this,i,x(this,i,"f").filter((e=>e.id!==t)),"f"),x(this,s,"m",c).call(this)}))}toggle(t){x(this,a,"f").toggleTask(t).then((e=>{w(this,i,x(this,i,"f").map((n=>n.id===t?e:n)),"f"),x(this,s,"m",c).call(this)}))}destroy(){x(this,a,"f").closeDB()}}a=new WeakMap,i=new WeakMap,s=new WeakSet,c=function(){this.dispatchEvent(new CustomEvent("list",{detail:x(this,i,"f")}))};const M=document.createElement("template");M.innerHTML='\n<li class="task">\n<button type="button" class="task-toggle"></button>\n<div class="task-description"></div>\n<button type="button" class="task-delete"></button>\n</li>\n';const S=document.createElement("template");S.innerHTML='\n<li>\n<header class="group-header"></header>\n<ul class="group-items"></ul>\n</li>\n';const B=document.createElement("template");var D,j,W,L,q,F,O,G,P,I,Y,N,H,U,Q,R;B.innerHTML='\n<section class="todo-view">\n<form name="addTodoItem">\n<div>\n<label for="taskDescription">Task description</label>\n<input type="text" id="taskDescription" name="taskDescription" required>\n</div>\n<footer>\n<label for="taskDate">Date</label>\n<input type="date" id="taskDate" name="taskDate" required>\n<button type="submit">Add</button>\n</footer>\n</form>\n<ul class="tasks">\n\n</ul>\n</section>\n',j=new WeakMap,W=new WeakMap,L=new WeakMap,q=new WeakMap,D=new WeakSet,F=function(t){const e=B.content.cloneNode(!0);w(this,W,e.querySelector("form"),"f"),w(this,L,e.querySelector("ul"),"f"),t.innerHTML="",t.appendChild(e)},O=function(t){t.innerHTML="",w(this,W,null,"f"),w(this,L,null,"f")},G=function(){w(this,q,new T,"f")},P=function(){var t;null===(t=x(this,q,"f"))||void 0===t||t.destroy(),w(this,q,null,"f")},I=function(t){var e,n;t.preventDefault();const r=new FormData(x(this,W,"f"));null===(e=x(this,q,"f"))||void 0===e||e.add({completed:!1,description:r.get("taskDescription"),date:new Date(r.get("taskDate"))}),null===(n=x(this,W,"f"))||void 0===n||n.reset()},Y=function(t){var e;null===(e=x(this,q,"f"))||void 0===e||e.toggle(t)},N=function(t){var e;null===(e=x(this,q,"f"))||void 0===e||e.remove(t)},H=function({detail:t}){const e=x(this,D,"m",U).call(this,t),n=document.createDocumentFragment();for(const[t,r]of e.entries()){const e=S.content.cloneNode(!0),o=e.querySelector("header"),s=e.querySelector("ul"),a=new Date(t).toLocaleDateString("ru",{day:"numeric",month:"long",year:"numeric",weekday:"short"});o.textContent=a,s.appendChild(r.reduce(((t,e)=>{const n=M.content.cloneNode(!0),r=n.querySelector("li");return n.querySelector("div").textContent=e.description,r.dataset.taskID=e.id.toString(),r.classList.toggle("completed",e.completed),t.appendChild(n),t}),document.createDocumentFragment())),n.appendChild(e)}x(this,L,"f").innerHTML="",x(this,L,"f").appendChild(n)},U=function(t){return t.sort(((t,e)=>t.date.getTime()-e.date.getTime()||t.id-e.id)).reduce(((t,e)=>{const n=e.date.getTime();return t.has(n)||t.set(n,[]),t.get(n).push(e),t}),new Map)},Q=function(){var t,e,n;null===(t=x(this,W,"f"))||void 0===t||t.addEventListener("submit",x(this,j,"f")),null===(e=x(this,q,"f"))||void 0===e||e.addEventListener("list",x(this,j,"f")),null===(n=x(this,L,"f"))||void 0===n||n.addEventListener("click",x(this,j,"f"))},R=function(){var t,e,n;null===(t=x(this,W,"f"))||void 0===t||t.removeEventListener("submit",x(this,j,"f")),null===(e=x(this,q,"f"))||void 0===e||e.removeEventListener("list",x(this,j,"f")),null===(n=x(this,L,"f"))||void 0===n||n.removeEventListener("click",x(this,j,"f"))};const Z=(new class{constructor(){D.add(this),j.set(this,{handleEvent:t=>{var e;switch(t.currentTarget){case x(this,W,"f"):return x(this,D,"m",I).call(this,t);case x(this,q,"f"):return x(this,D,"m",H).call(this,t);case x(this,L,"f"):const n=t.target,r=Number(null===(e=n.closest(".task"))||void 0===e?void 0:e.dataset.taskID);return n.closest(".task-toggle")?x(this,D,"m",Y).call(this,r):n.closest(".task-delete")?x(this,D,"m",N).call(this,r):void 0}}}),W.set(this,null),L.set(this,null),q.set(this,null)}render(t){return x(this,D,"m",G).call(this),x(this,D,"m",F).call(this,t),x(this,D,"m",Q).call(this),()=>{x(this,D,"m",R).call(this),x(this,D,"m",P).call(this),x(this,D,"m",O).call(this,t)}}}).render(document.body);globalThis.disposeTodoView=Z})()})();
//# sourceMappingURL=app.js.map